{% extends 'base.html.twig' %}

{% block title %}Championship{% endblock %}

{% block body %}
    <h1>Championship - {{ championship.getPercentDone() }}%</h1>
    <table class="table">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ championship.id }}</td>
            </tr>
            <tr>
                <th>Name</th>
                <td>{{ championship.name }}</td>
            </tr>
            <tr>
                <th>Date_start</th>
                <td>{{ championship.dateStart ? championship.dateStart|date('Y-m-d') : '' }}</td>
            </tr>
            <tr>
                <th>Date_end</th>
                <td>{{ championship.dateEnd ? championship.dateEnd|date('Y-m-d') : '' }}</td>
            </tr>
        </tbody>
    </table>
<details>
    <summary>Score Global</summary>
    <ul style="margin-top: 0">
        {% for player in allChampionshipPlayers %}
            <li>{{ player.name }} - {{ player.getTotalPointsByChampionship(championship) }}</li>
        {% endfor %}
    </ul>
</details>
<details>
    <summary>Score par tournois</summary>
    <ul style="margin-top: 0">
        {% for tournament in allTournaments %}
            <li>{{ tournament.name }}</li>
            <details>
                <summary>Score by Player</summary>
                <ul>
                    {% for result in tournament.tournamentResults|sort((a,b) => b.points <=> a.points) %}
                        <li>{{ result.player.name }} - {{ result.points }}</li>
                    {% endfor %}
                </ul>
            </details>
        {% endfor %}
    </ul>
</details>
    <a href="{{ path('app_championship_index') }}">back to list</a>

    <a href="{{ path('app_championship_edit', {'id': championship.id}) }}">edit</a>

    {{ include('championship/_delete_form.html.twig') }}
{% endblock %}
