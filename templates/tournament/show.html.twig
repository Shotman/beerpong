{% extends 'base.html.twig' %}

{% block title %}Tournois - {{ tournament.name }} {% endblock %}

{% block body %}
 <div id="showViewContainer" class="container-fluid align-self-start">
     <h1>Tournois - <a target="_blank" href="https://challonge.com/fr/{{ tournament.challongeId }}">{{ tournament.name }}</a> - {{ tournament.date ? tournament.date|date('d/m/y') : '' }} </h1>
     {% if tournament.extraData.state is not defined %}
     <div id="tournamentMatches" class="fade-in fade-out">
         {% include 'tournament/_partial/matches.html.twig' with {"matches":matches|default([]),"participants":participants,"tournament":tournament} %}
     </div>
     {% endif %}
     {% if tournament.challongeId %}
         <iframe src="https://challonge.com/fr/{{ tournament.challongeId }}/module" width="100%" height="500" allowtransparency="true"></iframe>
     {% endif %}
     {% if tournament.extraData.state is defined %}
     <div class="accordion border-bottom-0 mb-2">
        <details class="accordion-item border-bottom-0">
             <summary class="accordion-button"><p class="accordion-header user-select-none">Scores du tournois</p></summary>
             <ul class="accordion-body border-bottom list-group list-group-horizontal">
                 {% for result in tournament.tournamentResults|sort((a,b) => b.points <=> a.points) %}
                     <li class="list-group-item">{{ result.player.name }} - {{ result.points }} points</li>
                 {% endfor %}
             </ul>
         </details>
     </div>
     {% endif %}
     <div class="btn-group">
         <a class="btn btn-primary" href="{{ path('app_tournament_edit', {'id': tournament.id}) }}">{{ "btn.edit"|trans }}</a>
         {% if matches|length == 0 and tournament.extraData.state is not defined %}
         <button type="button" class="btn btn-success" hx-post="{{ path("app_tournament_finish",{"tournament":tournament.id}) }}">Terminer le tournois</button>
         {% endif %}
         <a class="btn btn-warning" href="{{ path('app_tournament_index') }}">{{ "btn.back"|trans }}</a>
     </div>
 </div>
{% endblock %}
